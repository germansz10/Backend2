# Backend E-commerce con Autenticaci贸n (JWT & Passport)
Este proyecto es un servidor de backend robusto para una aplicaci贸n de e-commerce, desarrollado con Node.js, Express y MongoDB.Implementa una API REST completa para la gesti贸n de productos y carritos, y un sistema de autenticaci贸n y autorizaci贸n de usuarios basado en Passport.js y JSON Web Tokens (JWT).Caracter铆sticas Principales API RESTful: Endpoints para la gesti贸n completa (CRUD) de productos y carritos.Autenticaci贸n y Autorizaci贸n:Registro de usuarios con contrase帽as hasheadas (bcrypt).Login de usuarios con passport-local.Manejo de sesiones stateless usando JWT (enviado en una httpOnly cookie).Ruta /current protegida para verificar la identidad del usuario a partir del token.Persistencia en Base de Datos: Utiliza MongoDB con Mongoose para almacenar usuarios, productos y carritos.Motor de Plantillas: Utiliza Handlebars.js para renderizar vistas del lado del servidor.Tiempo Real: Integra Socket.io para actualizar la lista de productos en tiempo real (/realtimeproducts).Tecnolog铆as Principales 锔Node.jsExpress.jsMongoDB (con Mongoose)Passport.js (con estrategias passport-local y passport-jwt)JSON Web Token (JWT)BcryptCookie-ParserHandlebarsSocket.ioInstalaci贸n Sigue estos pasos para levantar el proyecto en tu entorno local.1. Clonar el RepositorioAbre tu terminal y clona el repositorio desde GitHub:Bashgit clone https://github.com/germansz10/Backend2.git
cd Backend2
2. Instalar DependenciasEl proyecto utiliza Node.js. Aseg煤rate de tenerlo instalado. Luego, instala las dependencias necesarias:Bashnpm install
3. Configurar Variables de EntornoCrea un archivo .env en la ra铆z del proyecto. Este archivo es crucial para almacenar tus claves secretas y la conexi贸n a la base de datos.Fragmento de c贸digo# Ejemplo de archivo .env

# Conexi贸n a MongoDB (reemplaza con tu string de Atlas o local)
MONGO_URL="mongodb+srv://<user>:<password>@cluster.mongodb.net/<database_name>"

# Clave secreta para firmar los JSON Web Tokens
JWT_PRIVATE_KEY="tuClaveSecretaLargaYAleatoria"
Uso 讹Para iniciar el servidor, ejecuta el siguiente comando. El servidor se iniciar谩 en http://localhost:8080.Bashnpm start
(Aseg煤rate de tener un script "start": "node server.js" en tu package.json).Una vez iniciado, ver谩s el mensaje Servidor escuchando en el puerto 8080 y Conectado a la base de datos MongoDB en tu consola.Endpoints de la APIPuedes probar todos los endpoints usando un cliente de API como Postman o Insomnia.Sesiones y Autenticaci贸n (/api/sessions)M茅todoRutaDescripci贸nBody (Ejemplo)POST/registerRegistra un nuevo usuario en la base de datos.{ "first_name": "Usuario", "email": "test@correo.com", "password": "pass123", ... }POST/loginAutentica a un usuario y devuelve una cookie ecommerceToken con el JWT.{ "email": "test@correo.com", "password": "pass123" }GET/currentValida el JWT de la cookie y devuelve los datos del usuario logueado.N/APOST/logoutBorra la cookie de sesi贸n y cierra la sesi贸n del usuario.N/AProductos (/api/products)M茅todoRutaDescripci贸nGET/Obtiene la lista completa de productos.GET/:pidObtiene un producto por su ID.POST/Crea un nuevo producto.PUT/:pidActualiza un producto por su ID.DELETE/:pidElimina un producto por su ID.Carritos (/api/carts)M茅todoRutaDescripci贸nPOST/Crea un nuevo carrito de compras vac铆o.GET/:cidObtiene los productos dentro de un carrito por su ID.POST/:cid/product/:pidAgrega un producto a un carrito.Vistas con Handlebars y WebSocketsEl proyecto tambi茅n incluye vistas renderizadas del lado del servidor.http://localhost:8080/register: Formulario para registrar un nuevo usuario.http://localhost:8080/login: Formulario para iniciar sesi贸n.http://localhost:8080/realtimeproducts: Panel de control interactivo que muestra la lista de productos y permite agregar o eliminar art铆culos en tiempo real usando WebSockets.